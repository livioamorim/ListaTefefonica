angular.module("listaTelefonica",["ngMessages","serialGenerator","ui","ngRoute"]),angular.module("listaTelefonica").config(function(a){a.when("/contatos",{templateUrl:"view/contatos.html",controller:"listaTelefonicaControlador",resolve:{contatos:function(a){return a.getContatos()},operadoras:function(a){return a.getOperadoras()}}}),a.when("/novoContato",{templateUrl:"view/novoContato.html",controller:"novoContatoControlador",resolve:{operadoras:function(a){return a.getOperadoras()}}}),a.when("/detalhesContato/:serial",{templateUrl:"view/detalhesContato.html",controller:"detalhesContatoControlador",resolve:{contato:function(a,b){return a.getContato(b.current.params.serial)}}}),a.when("/detalhesOperadora/:nome",{templateUrl:"view/detalhesOperadora.html",controller:"detalhesOperadoraControlador",resolve:{operadora:function(a,b){return a.getOperadora(b.current.params.nome)}}}),a.otherwise({redirectTo:"/contatos"})}),angular.module("listaTelefonica").config(function(a){a.setLength(5),a.setCharArray("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}),angular.module("listaTelefonica").controller("detalhesContatoControlador",function(a,b,c){a.contato=c.data}),angular.module("listaTelefonica").controller("detalhesOperadoraControlador",function(a,b,c){a.operadora=c.data}),angular.module("listaTelefonica").controller("listaTelefonicaControlador",function(a,b,c,d){a.app="Lista Telefonica",a.contatos=c.data,a.operadoras=d.data,a.apagarContato=function(b){a.contatos=b.filter(function(a){return a.selecionado?void 0:a})},a.isContatoSelecionado=function(a){return a.some(function(a){return a.selecionado})},a.ordenarPor=function(b){a.criterioOrdenacao=b,a.direcaoOrdenacao=!a.direcaoOrdenacao}}),angular.module("listaTelefonica").controller("novoContatoControlador",function(a,b,c,d,e){b.operadoras=d.data,b.adicionarContato=function(d){d.serial=e.generate(),c.setContatos(d).success(function(c){delete b.contato,b.contatoForm.$setPristine(),a.path("/contatos")})}}),angular.module("listaTelefonica").directive("uiAccordions",function(){return{controller:function(a,b,c){var d=[];this.registerAccordion=function(a){d.push(a)},this.closeAll=function(){d.forEach(function(a){a.isOpened=!1})}}}}),angular.module("listaTelefonica").directive("uiAccordion",function(){return{templateUrl:"view/accordion.html",transclude:!0,scope:{title:"@"},require:"^uiAccordions",link:function(a,b,c,d){d.registerAccordion(a),a.open=function(){d.closeAll(),a.isOpened=!0}}}}),angular.module("listaTelefonica").directive("uiAlert",function(){return{templateUrl:"view/alert.html",replace:!0,restrict:"AE",scope:{title:"@"},transclude:!0}}),angular.module("listaTelefonica").directive("uiDate",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=function(a){return a=a.replace(/[^0-9]+/g,""),a.length>2&&(a=a.substring(0,2)+"/"+a.substring(2)),a.length>5&&(a=a.substring(0,5)+"/"+a.substring(5,9)),a};c.bind("keyup",function(){e.$setViewValue(f(e.$viewValue)),e.$render()}),e.$parsers.push(function(a){if(10===a.length){var b=a.split("/");return new Date(b[2],b[1]-1,b[0])}}),e.$formatters.push(function(b){return a("date")(b,"dd/MM/yyyy")})}}}),angular.module("listaTelefonica").filter("ellipsis",function(){return function(a,b){if(a.length<=b)return a;var c=a.substring(0,b||5)+"...";return c}}),angular.module("listaTelefonica").filter("name",function(){return function(a){var b=a.split(" "),c=b.map(function(a){return/(da|de|do|dos)/.test(a)?a:a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()});return c.join(" ")}}),angular.module("listaTelefonica").factory("contatosAPI",function(a,b){var c=function(){return a.get(b.baseURL+"/contatos")},d=function(c){return a.get(b.baseURL+"/contatos/"+c)},e=function(c){return a.post(b.baseURL+"/contatos",c)};return{getContatos:c,getContato:d,setContatos:e}}),angular.module("listaTelefonica").service("operadorasAPI",function(a,b){this.getOperadoras=function(){return a.get(b.baseURL+"/operadoras")},this.getOperadora=function(c){return a.get(b.baseURL+"/operadoras/"+c)}}),angular.module("listaTelefonica").constant("config",{baseURL:"http://localhost:3412"}),angular.module("serialGenerator",[]),angular.module("serialGenerator").provider("serialGenerator",function(){var a,b;this.getLength=function(){return a},this.getCharArray=function(){return b},this.setLength=function(b){a=b},this.setCharArray=function(a){b=a},this.$get=function(){return{generate:function(){for(var c="";c.length<a;)c+=b.charAt(Math.floor(Math.random()*b.length));return c}}}}),angular.module("ui",[]),angular.module("ui").run(function(a){a.put("view/accordion.html",'<div class="ui-accordion-title" ng-click="open()">{{title}}</div><div class="ui-accordion-content" ng-show="isOpened" ng-transclude></div>')}),angular.module("ui").directive("uiAccordions",function(){return{controller:function(a,b,c){var d=[];this.registerAccordion=function(a){d.push(a)},this.closeAll=function(){d.forEach(function(a){a.isOpened=!1})}}}}),angular.module("ui").directive("uiAccordion",function(){return{templateUrl:"view/accordion.html",transclude:!0,scope:{title:"@"},require:"^uiAccordions",link:function(a,b,c,d){d.registerAccordion(a),a.open=function(){d.closeAll(),a.isOpened=!0}}}});